#!/bin/bash

# Function to prompt the user
prompt_user() {
  echo "UpgrayeDD wants to know, do you want to reboot or shutdown? (r for reboot / s for shutdown) - A pimp's gotta choose!"
  echo "You have 15 seconds to choose, otherwise UpgrayeDD will reboot your ass..."
}

# Set a timeout for the user's input
read_user_input() {
  read -t 15 -p "Choose wisely: " choice
}

# Function to handle the user's choice
handle_choice() {
  case $choice in
    r|R)
      echo "UpgrayeDD is rebooting the system..."
      sudo reboot now
      ;;
    s|S)
      echo "UpgrayeDD is shutting down the system..."
      sudo shutdown now
      ;;
    *)
      echo "UpgrayeDD is didn't hear shit from you. Rebooting by default..."
      sudo reboot now
      ;;
  esac
}

clear
echo "*******************************"
echo "***** UPGREYEDD RESUMING ******"
echo "*******************************"
cd rc-lap-timer
echo "*** UpgrayeDD untarring"
tar xzf ../rc-lap-timer-build.tar.gz
echo "*** UpgrayeDD copying files"
sudo mkdir -p /var/www/rc-lap-timer
sudo cp -r .next/* /var/www/rc-lap-timer/
echo "*** UpgrayeDD prisma magic"
npx prisma generate
npx prisma db push
echo "*** UpgrayeDD owning shit left and right"
sudo chown -R pi:pi /home/pi/rc-lap-timer
echo "*** UpgrayeDD asking what you want!"
echo "--------------------------------------------------------------------------------------------------------------------"
echo "--------------------------------------------------------======------------------------------------------------------"
echo "------------------------------------------------=+*#****++****#####*+-----------------------------------------------"
echo "--------------------------------------------=*#*+++++********#%%%%##*##*=-------------------------------------------"
echo "------------------------------------------+#+++***************#%%@@%%#+=**------------------------------------------"
echo "----------------------------------------+#==******************##%%%@%#*=-**-----------=*+-====----------------------"
echo "---------------------------------------#*:-+******************##%%@@%%#+-=#=-----+*#**%*++==+*##%#*=----------------"
echo "--------------------------------------+%.:=+*********##%%%%%%%%%%@@@@%#*=-#+---*#****########**++++*##+-------------"
echo "--------------------------------------+%.:=+****#%#**++++++**###%%%%%%%%#+*##%%#####*****##*****#%#*+++**=----------"
echo "--------------------------------------+%.:=*#%*+**+**+++++***###%%%%%%%%%@@@@%%%##***##%@@@@%%###+*##+=+%@#---------"
echo "--------------------------------------+#.-#*+###***+++++****##%%@@%#*++++**##############*++#@@@@%*+*%#+==%---------"
echo "--------------------------------------+@#=+*####*******#%%%%#**##%%###%####################**++%**@#+*#%*+*%=-------"
echo "--------------------------------------*#:=######*#%@%#**#%%%%%##############################***-#*-*%*+%#=+@%-------"
echo "--------------------------------------*#:*#%%@%%###%@@@@@@@@@@@@@@@@@@@@@@@@%%##########*#****++:%+=####%*==#-------"
echo "-------------------------------------=#@@%###@@@@@@@@@@@@@@@@%%%#####%@@@@@@@@@@%%%####*#***++++:+#-=##=##=+#*------"
echo "--------------------------------=*%@%*#%@@@@@@@@@@@@%%%##########%%%%%%@@@@@@##@@@@%#%##**+*++=+:+#--+*=#%=:#*------"
echo "----------------------------*%@%*#%@@@@@@@@#=+#%%@@@@@@@%#@*%@@@@@@@@@%#+*@@%%**@@@%#%#%#*+*+*==:#*--=###%=#+*------"
echo "------------------------+%%*+%@@@@@@@@@@@@%*#%@@@@@@@@@@#-=-+:+%@@@@@@@@%+%@@**%@@%%%#%*%+#++++:=@---+*-*%==%+------"
echo "---------------------*%#+#@@@@@@@@@@@@@@@@#+*+====*%@@@@+#%#*@@@@#%@@@@@@*+%@#*@@@@%%%#@+#+*+=-=@=--=##*%#==%-------"
echo "-------------------##=*%#%%%%%%@@@@@@@@@@@**@@@@@@@@@@@*%#+#%*@@@@@@@@@@@*+%@##%%@@%%%%##+*+=-+%=----***#=%#=-------"
echo "-----------------*#-%######%%%%%@@@@@@@@@@%##%%%%%%%%#*#+::=##*%%%%%%%%%#*%@@#++@@@@@#@*#++--#*-----+%#%*+@=--------"
echo "----------------+%=%######%##%%%%@@@@@@@%@@#*###******#*=::-+####****###**#@%#*#@@@@@#%++=-*#=-----=*#%*%#----------"
echo "----------------+#=####%%%%%%%@%@@@@@@@%@@%+**++++**##*##***#%##%#******#*+%@#%@@@@@%#+==##=------=#%###=-----------"
echo "-----------------*#-*###%%%%%%@%%@@@@@@@#@%=-***+=-=*##**#@%###%#*-=**#*+:*@%#*@@%%*==*%*-------=*%#%*=-------------"
echo "------------------=%*=*###%%%%%@%%%%@@@%**%#:-++=-+#+++*####%##*++#=+##+:-#%##+%*++##+:..:-----=++=-----------------"
echo "---------------------*#*+**#%%%%%@@%%@@%=#@#-.=+++*+#%#**+=+**#%@#+#*##+:-##%+*%#*-.......:-------------------------"
echo "------------------------+###***###%%@@@@*=*%=.=++**%#*#%%%###%%%#%@*###+-=%#=#=............:------------------------"
echo "-----------------------------+*####*****#%*%+.-+++####+=--=--=+*###%##*=:=##%:.............:------------------------"
echo "-------------------------------.......::--+@*:.-++++++*#@@@@@%#****##*+-:*%##...............:-----------------------"
echo "------------------------------:...........=%@+..-++++++++*+++++**##**-::=%##+::..............:----------------------"
echo "------------------------------.............=%@#-..-++++=:::::-+*##*=-::+%@#=:................:----------------------"
echo "-----------------------------:..............:#=+#+::=+++====+**#*=:-+##=**:...................----------------------"
echo "-----------------------------................++.-*%#+++**###%##++*%@@%+-*+....................:---------------------"
echo "-----------------------------...............-##::+*#%@@%%@@@%%%@@@@@@#==%#-...................:---------------------"
echo "-----------------------------.............:+#%**:+**++*%%@@@@@@@@@@@%*+**#%*:.................:---------------------"
echo "-----------------------------............-***#:-#***+=-=++*##%@@@@@@%%+-=%#+%*:...............:---------------------"
echo "-----------------------------..........:*+-+@#:..=%%*=--=+**##%%@@@@+-:-+%@#-+#*:.............:---------------------"
echo "-----------------------------......:-*#*-=+%@%-....=#%+--+**##%%@%=::==-*#%%*=+=##*-:.........:---------------------"
echo "-----------------------------:.-+##+#%-:+=#@%%+:.....-*%#***#%%*-.:=-+-=##%%#+**=+%**##+-:....----------------------"
echo "--------------------------=*%#+---+#=-=*=#%@%#*-........-#@%*-....==---***%@%*+#*+=#%*+==+##+-----------------------"
echo "---------------------=*##*=:::=+*%*=+**=*##*#*%-:......-##*##-...:-::-=#+%**@=**##*+*%#%#+=--=*%%*=-----------------"
echo "----------------=*%#+-::::==***#%++****=*%%#%*#+-:....+#*+**#%+.....:-#+*%%#@+***###*+%%###*+==-:-=*#%*=------------"
echo "-----------=+#%*-:.::==++++***%#+******#%%*=##*%::...+%*+++**#%=...:-+#=##=*@#%**###****@###**+++++----=+#%#+-------"
echo "--------=%*#+.:--=+=+++*****#%=*******%+*%**%#+%+-:.-%%#*++*##%%-.:-=%=*%*=#@:#%#*******+%%******+**+++=+---####=---"
echo "--------%=:#*=+++++*******#%=+******%*=*#@@%%#**%:::*#%##***##%%+::-%++%#%%@%:**%#********#%#***********+*+=%*=**---"
echo "-------+%:*##************%#+******#%=+**#@%*+##+@=:=#-=%@#%%@%==#-:+#=#%#+*#*=**+*%*********%#**************%*++*=--"
echo "-------*#:*#%*************#@%****#*+***##%*=+%#**#-*+.-#-:*#%#::**-@-*%*=*#%+=***++%#****#@%#***********####%+++#=--"
echo "-------**:**%**#****#%%#****#@@%%++****##@%##@#*+@**::#=::*#%%*::##++%%#%@%%-******=#%#@@%#***##%******####%#*+=#=--"
echo "-------+*.+*%#*******%-:-+#%@@@#=*******#@##+-+%*#%-:*==--**#%#=:+%-@#**+=%%-*******++@@@@#*=--%@#*****##**@**=-#=--"
echo "-------#+.-*#%*******%*-*****+==********#@@%+=#@*+%=*+-**-###%##=#=#@-=%%*#*=********+=+****+=%@%#*****##*#%+*=:#*--"
echo "------=#:.=*#%#******#%+=****************@#+##=##*##*+##+-*#####%*+%=@#**%@=+***********#%#*=#@%%#****####@***=-=#=-"
echo "------+*:-=+*%%******#%#=+***************%%%#-:-#%#@*=+-##***###%%@===###@#-+**************+#@@%#****#####@+***-:#+-"
echo "------#+:-+**#%#*****#%@*=***************#@#*%@%+*%#*++-#***###%@==@@*=##%+=+*************+*@%##****#####%%****+:+#-"
echo "-----*#::=+*+*%##****##%%=+**************#@#+##*==#%%**++***##%%#*=*@#+#%#-=***************%@%%*=@#*#####@**##*+=:##"
echo "----=#=.==+##*#%###*+*#%@#=+**************@@%#*#%*-=*%#*****#*+==%+=##%##*-+**************%@#*=::@%%#=+%%%**%##*+-=@"
echo "----=#=-=**#%##%#%#****#%@*=**************%@%%#*=+#%%%%##%#**-#%=-#*%***%==**************%%*=::==@%-:-+%@##@%%##*==@"
echo "-----*=+**%%%%%%%%%%#+**#%@=+*************#@%#%##%##%*=+%+:##*+%#+*%***%#-+*************%%+::-=##*:-+**%%%@%%%%#**+#"
echo "-------=*##%#%%@%%%%##****%@-+*************%@%#%*=--**#**+-%#+=*+*%***%%+-*************#%-=*+=#%+:=+#*#@@@%%%%%#*+--"
echo "----------++*##@@%%%%#*+***%%-+************#@%#**#%%#*####+%#+#%%#***#%#=+************#@*#+--#%+-+%##*@@@@####*=----"
echo "--------------=+#######*****%#-*************%@%#****#%*##%%@@@#**+*##%%*-************#@%+=++#%++#@%%%#*%%++=--------"
echo "--------------------==++++++*%*=************#@%%#****#@#%*@%%#+*++###%%=+***********#@%##********++++==-------------"
echo "------------------------------=-=++++********%%%#***##+-+-**##*++*###%*=***********#@#**++++===---------------------"
echo "-----------------------------------------====+*+*+*#=*%*%=@%*#*+++****-=+++=======-==-------------------------------"
prompt_user
read_user_input
handle_choice